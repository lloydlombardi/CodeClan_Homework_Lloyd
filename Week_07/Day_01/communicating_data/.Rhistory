library(tidyverse)
library(janitor)
library(tsibbledata)
library(brew)
library(lubridate)
nyc_bikes <- nyc_bikes %>% clean_names()
nyc_bikes
view(nyc_bikes)
glimpse(nyc_bikes)
nyc_bikes %>%
filter(is.na(bike_id:gender))
nyc_bikes %>%
filter(!is.na(bike_id:gender))
nyc_bikes %>%
filteris.na(bike_id:gender))
nyc_bikes %>%
filter(is.na(bike_id:gender))
nyc_bikes %>%
distinct(type)
nyc_bikes %>%
distinct(start_station)
nyc_bikes %>%
distinct(gender)
nyc_bikes %>%
group_by(gender) %>%
summarise(count = n())
nyc_bikes %>%
group_by(type) %>%
summarise(count = n())
nyc_bikes %>%
group_by(type, gender) %>%
summarise(count = n())
nyc_bikes %>%
group_by(type, gender, birth_year) %>%
summarise(count = n())
nyc_bikes %>%
group_by(type, gender, birth_year) %>%
summarise(count = n()) %>%
arrange(desc(count))
library(tidyverse)
library(janitor)
library(tsibbledata)
library(brew)
library(lubridate)
nyc_bikes <- nyc_bikes %>% clean_names()
glimpse(nyc_bikes)
nyc_bikes %>%
filter(is.na(bike_id:gender))
nyc_bikes %>%
distinct(type)
nyc_bikes %>%
distinct(start_station)
nyc_bikes %>%
distinct(gender)
nyc_bikes %>%
group_by(gender) %>%
summarise(count = n())
nyc_bikes %>%
group_by(type, gender) %>%
summarise(count = n())
nyc_bikes %>%
group_by(type, gender, birth_year) %>%
summarise(count = n()) %>%
arrange(desc(count))
nyc_bikes %>%
filter(gender %in% c("Male", "Female"))
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "seconds"),
.after = stop_time)
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
.after = stop_time)
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
.after = stop_time) %>%
arrange(desc(ride_duration))
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, "(Dec)*(Jan)*(Feb)*" ~ "Winter",
TRUE ~ month_ride)
)
.after = stop_time)
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, "(Dec)*(Jan)*(Feb)*" ~ "Winter",
TRUE ~ month_ride)
),
.after = stop_time)
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, c("December", "January", "February")) ~ "Winter",
str_detect(month_ride, c("March", "April", "May")) ~ "Spring",
str_detect(month_ride, c("June", "July", "August")) ~ "Summer",
str_detect(month_ride, c("September", "October", "November")) ~ "Autumn",
),
.after = stop_time)
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, c("December", "January", "February")) ~ "Winter",
str_detect(month_ride, c("March", "April", "May")) ~ "Spring",
str_detect(month_ride, c("June", "July", "August")) ~ "Summer",
str_detect(month_ride, c("September", "October", "November")) ~ "Autumn",
),
.after = stop_time)
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, "(December)* (January)* (February)*" ~ "Winter",
str_detect(month_ride, "March", "April", "May") ~ "Spring",
str_detect(month_ride, "June", "July", "August") ~ "Summer",
str_detect(month_ride, "September", "October", "November") ~ "Autumn",
),
.after = stop_time)
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, "(December)* (January)* (February)*") ~ "Winter",
str_detect(month_ride, "March", "April", "May") ~ "Spring",
str_detect(month_ride, "June", "July", "August") ~ "Summer",
str_detect(month_ride, "September", "October", "November") ~ "Autumn",
),
.after = stop_time)
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, "(December)*(January)*(February)*") ~ "Winter",
str_detect(month_ride, "(March)*(April)*(May)*") ~ "Spring",
str_detect(month_ride, "(June)*(July)*(August)*") ~ "Summer",
str_detect(month_ride, "(September)*(October)*(November)*") ~ "Autumn",
),
.after = stop_time)
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, "^[D]?[Ja]?[F]?") ~ "Winter",
str_detect(month_ride, "^[Mar]?[Ap]?[May]?") ~ "Spring",
str_detect(month_ride, "^[Ju]?[Au]?") ~ "Summer",
str_detect(month_ride, "^[Se]?[Oc]?[No]?") ~ "Autumn",
),
.after = stop_time)
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, "^[D]+[Ja]+[F]+") ~ "Winter",
str_detect(month_ride, "^[Mar]+[Ap]+[May]+") ~ "Spring",
str_detect(month_ride, "^[Ju]+[Au]+") ~ "Summer",
str_detect(month_ride, "^[Se]+[Oc]+[No]+") ~ "Autumn",
),
.after = stop_time)
winter <- c("December", "January", "February")
spring <- c("March", "Arpil", "May")
summer <- c("June", "July", "August")
autumn <- c("September", "October", "November")
winter <- c("December", "January", "February")
spring <- c("March", "Arpil", "May")
summer <- c("June", "July", "August")
autumn <- c("September", "October", "November")
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, winter) ~ "Winter",
str_detect(month_ride, spring) ~ "Spring",
str_detect(month_ride, summer) ~ "Summer",
str_detect(month_ride, autumn) ~ "Autumn",
),
.after = stop_time)
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"))
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes")),
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, winter) ~ "Winter",
str_detect(month_ride, spring) ~ "Spring",
str_detect(month_ride, summer) ~ "Summer",
str_detect(month_ride, autumn) ~ "Autumn",
),
.after = stop_time)
?recode
winter <- c("December", "January", "February")
spring <- c("March", "Arpil", "May")
summer <- c("June", "July", "August")
autumn <- c("September", "October", "November")
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = recode(month_ride,
"Winter" = winter,
"Spring" = spring,
"Summer" = summer,
"Autumn" = autumn)
.after = stop_time)
winter <- c("December", "January", "February")
spring <- c("March", "Arpil", "May")
summer <- c("June", "July", "August")
autumn <- c("September", "October", "November")
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = recode(month_ride,
"Winter" = winter,
"Spring" = spring,
"Summer" = summer,
"Autumn" = autumn),
.after = stop_time)
winter <- c("December", "January", "February")
spring <- c("March", "Arpil", "May")
summer <- c("June", "July", "August")
autumn <- c("September", "October", "November")
nyc_bikes %>%
mutate(month_ride = month(start_time, label = TRUE, abbr = FALSE),
day_of_week_ride = wday(start_time, label = TRUE, abbr = TRUE),
ride_duration = as.numeric(as.period(stop_time - start_time), "minutes"),
season = case_when(
str_detect(month_ride, "December") ~ "Winter",
str_detect(month_ride, "January") ~ "Winter",
str_detect(month_ride, "February") ~ "Winter",
str_detect(month_ride, "March") ~ "Spring",
str_detect(month_ride, "April") ~ "Spring",
str_detect(month_ride, "May") ~ "Spring",
str_detect(month_ride, "June") ~ "Summer",
str_detect(month_ride, "July") ~ "Summer",
str_detect(month_ride, "August") ~ "Summer",
str_detect(month_ride, "September") ~ "Autumn",
str_detect(month_ride, "October") ~ "Autumn",
str_detect(month_ride, "November") ~ "Autumn",
),
.after = stop_time)
